# 通知システム実装タスクリスト

## 1. 本部から施設への通知
*トリガー: 本部スタッフ（管理者）が記録にコメントを追加した時*
- [x] 実装計画の作成 (本部->施設)
- [x] バックエンドロジックの実装 (`app/actions/findings.ts` 内の `addFindingComment`)
    - [x] 投稿者が管理者か判定
    - [x] 全レコードタイプで `facility_id` を特定
    - [x] 対象施設へシステム通知を送信
- [x] 本部->施設通知の検証

## 2. 施設から本部への通知
*トリガー: 施設スタッフ（非管理者）が回答または指摘を解決した時*
- [x] 実装計画の作成 (施設->本部)
- [x] バックエンドヘルパーの実装 (`notifyOrganizationAdmins`)
- [x] `app/actions/findings.ts` 内の通知ロジック実装
    - [x] `addFindingComment`: スタッフからの回答時に管理者に通知
    - [x] `toggleFindingResolved`: 解決時に管理者に通知
- [x] 施設->本部通知の検証

## 3. ドキュメント作成と仕上げ
- [x] 本部通知のウォークスルー作成
- [x] 施設通知のウォークスルー作成
- [ ] 最終システムレビュー（任意）
