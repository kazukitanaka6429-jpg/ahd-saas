# 実装計画: ショートステイ保存エラー修正

## 概要
ショートステイ保存時に `public.short_stay_records` が見つからないというエラーが発生しています。
`supabase` CLI が Docker エラーで使用できないため、Node.js スクリプトを用いてデータベースの状態確認と修正を行います。

## 変更内容
### 検証・修正用スクリプトの作成
- **`scripts/fix_short_stay_schema.ts` の作成**:
    - `supabase-js` クライアントを使用してDBに接続。
    - `short_stay_records` テーブルの存在確認。
    - 存在しない場合: マイグレーションファイルの内容（SQL）を直接実行してテーブルを作成。
    - 存在する場合: `NOTIFY pgrst, 'reload schema'` を実行してスキーマキャッシュを更新。

### コードベース
- 変更予定はありません。現状のコードは正しいと仮定し、DB側の状態をコードに合わせて修正します。

## 検証計画
### 自動検証 (スクリプト)
- 作成したスクリプトを実行し、成功ログを確認する。

### 手動検証
1. **サーバー起動**: `npm run dev` で開発サーバーを起動。
2. **ブラウザ操作**: ブラウザでショートステイ画面へアクセス。
3. **データ保存**: フォームに入力し「保存」を実行。エラーが出ずに保存完了トースト（またはリダイレクト）が表示されることを確認。
